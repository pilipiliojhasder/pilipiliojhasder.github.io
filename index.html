<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∏—Ä–ø–∏—á–Ω—ã–π –°—á—ë—Ç—á–∏–∫ —Å –ü—Ä–æ–º–æ–∫–æ–¥–∞–º–∏</title>

    <style>
        /* CSS —Å—Ç–∏–ª–∏ */
        body {
            background-color: coral; /* –§–æ–Ω –∫–æ—Ä–∞–ª–ª–æ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* –í—ã—Å–æ—Ç–∞ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            overflow: hidden; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª */
        }

        #game-container {
            text-align: center;
            background-color: rgba(0, 0, 0, 0.2); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.5); /* –¢–µ–Ω—å –¥–ª—è –æ–±—ä–µ–º–∞ */
            backdrop-filter: blur(5px); /* –ù–µ–±–æ–ª—å—à–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ –∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º */
            width: 90%; /* –®–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            max-width: 500px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞–µ–º padding –≤ —à–∏—Ä–∏–Ω–µ */
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
            z-index: 1; /* –ß—Ç–æ–±—ã –±—ã–ª –ø–æ–¥ –∫–∞–ø—á–µ–π */
        }

        #brick-emoji {
            font-size: 10em; /* –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π –∫–∏—Ä–ø–∏—á */
            cursor: pointer; /* –ö—É—Ä—Å–æ—Ä –≤ –≤–∏–¥–µ —É–∫–∞–∑–∞—Ç–µ–ª—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            user-select: none; /* –ó–∞–ø—Ä–µ—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ */
            transition: transform 0.15s ease-out; /* –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏/–∫–ª–∏–∫–µ */
            display: inline-block; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å transform */
            line-height: 1; /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
            margin-bottom: 20px;
        }

        #brick-emoji:hover {
            transform: scale(1.05); /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        #brick-emoji:active {
            transform: scale(0.95); /* –£–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ */
        }

        #counter {
            font-size: 3em; /* –ë–æ–ª—å—à–æ–π —à—Ä–∏—Ñ—Ç –¥–ª—è —Å—á—ë—Ç—á–∏–∫–∞ */
            font-weight: bold;
            color: #ffeb3b; /* –Ø—Ä–∫–æ-–∂—ë–ª—Ç—ã–π —Ü–≤–µ—Ç */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6); /* –¢–µ–Ω—å –¥–ª—è —Ç–µ–∫—Å—Ç–∞ —Å—á—ë—Ç—á–∏–∫–∞ */
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        #message {
            margin-top: 5px; /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª–æ –ø—Ä–æ–º–æ */
            font-size: 1.2em;
            color: #ffe0b2;
            min-height: 1.5em; /* –ß—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ "–ø—Ä—ã–≥–∞–ª" */
            margin-bottom: 20px; /* –û—Ç—Å—Ç—É–ø –¥–æ —Å–µ–∫—Ü–∏–∏ –ø—Ä–æ–º–æ */
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ */
        #promo-section {
            margin-top: 20px;
            padding-top: 20px;

border-top: 1px solid rgba(255, 255, 255, 0.3); /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
            width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        }

        #promo-input-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ –∏ –∫–Ω–æ–ø–∫–æ–π */
            flex-wrap: wrap; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
        }

        #promo-input {
            flex-grow: 1; /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ –±—É–¥–µ—Ç —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å—Å—è */
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            background-color: rgba(255, 255, 255, 0.9);
            color: #333;
            outline: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ–±–≤–æ–¥–∫—É –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
            box-sizing: border-box;
            transition: background-color 0.3s ease;
            min-width: 150px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –ø–æ–ª—è –≤–≤–æ–¥–∞ */
        }

        #promo-input:focus {
            background-color: white;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
        }

        #apply-promo-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background-color: #4CAF50; /* –ó–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            white-space: nowrap; /* –ß—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª–∞—Å—å */
        }

        #apply-promo-btn:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        #apply-promo-btn:active {
            transform: translateY(0);
            background-color: #3e8e41;
        }

        #promo-message {
            margin-top: 15px;
            font-size: 1em;
            color: #ffcc80; /* –¶–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø—Ä–æ–º–æ —Å–æ–æ–±—â–µ–Ω–∏–π */
            min-height: 1.2em; /* –ß—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ "–ø—Ä—ã–≥–∞–ª" */
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞ */
        #reset-progress-btn {
            margin-top: 30px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –ø—Ä–æ–º–æ-—Å–µ–∫—Ü–∏–∏ */
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background-color: #f44336; /* –ö—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
            color: white;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        #reset-progress-btn:hover {
            background-color: #da190b;
            transform: translateY(-2px);
        }

        #reset-progress-btn:active {
            transform: translateY(0);
            background-color: #c00c00;
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è –ö–∞–ø—á–∏ --- */
        #captcha-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* –¢–µ–º–Ω—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ */
            opacity: 0; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞ */
            visibility: hidden; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞ */
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        #captcha-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .captcha-content {
            background-color: #ffffff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–∞–ø—á–∏ */
            color: #333; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-sizing: border-box;
        }

        .captcha-content h2 {
            margin-top: 0;
            color: #333;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .captcha-content p {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 25px;
            color: #555;

}

        .captcha-content input[type="text"] {
            width: calc(100% - 30px); /* –£—á–∏—Ç—ã–≤–∞–µ–º padding */
            padding: 15px;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-size: 1.4em;
            text-align: center;
            outline: none;
            transition: border-color 0.3s ease;
            margin-bottom: 20px;
        }

        .captcha-content input[type="text"]:focus {
            border-color: #4CAF50;
        }

        .captcha-content button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            background-color: #4CAF50;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        .captcha-content button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        .captcha-content button:active {
            transform: translateY(0);
            background-color: #3e8e41;
        }

        #captcha-message {
            margin-top: 15px;
            font-size: 1.1em;
            color: red; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –æ—à–∏–±–æ–∫ */
            min-height: 1.2em;
        }
    </style>
</head>
<body>

    <!-- –ö–∞–ø—á–∞ (–ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ) -->
    <div id="captcha-overlay">
        <div class="captcha-content">
            <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç</h2>
            <p id="captcha-problem"></p>
            <input type="text" id="captcha-answer" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç" autocomplete="off">
            <button id="captcha-submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <div id="captcha-message"></div>
        </div>
    </div>

    <div id="game-container">
        <div id="brick-emoji">üß±</div>
        <div id="counter">–°—á—ë—Ç: 0.000</div>
        <div id="message"></div> <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–∫–∞ –ø–æ –∫–∏—Ä–ø–∏—á—É -->

        <div id="promo-section">
            <div id="promo-input-group">
                <input type="text" id="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
                <button id="apply-promo-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
            <div id="promo-message"></div> <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–º–æ–∫–æ–¥–µ -->
        </div>

        <button id="reset-progress-btn">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
    </div>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∑–≤—É–∫–∞ -->
    <!-- –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π URL –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è/–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ñ–∞–π–ª–∞ —Å Google Drive -->
    <audio id="clickSound" src="https://drive.google.com/uc?export=download&id=1BgWZo5y8YmaS_bTIsiSYyL7Btw5mXpRo" preload="auto"></audio>

    <script>
        // JavaScript –ª–æ–≥–∏–∫–∞
        const brick = document.getElementById('brick-emoji');
        const counterDisplay = document.getElementById('counter');
        const messageDisplay = document.getElementById('message'); // –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –∫–∏—Ä–ø–∏—á–∞

        const promoInput = document.getElementById('promo-input');
        const applyPromoBtn = document.getElementById('apply-promo-btn');
        const promoMessageDisplay = document.getElementById('promo-message'); // –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞
        const resetProgressBtn = document.getElementById('reset-progress-btn'); // –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞

        // –≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞–ø—á–∏
        const captchaOverlay = document.getElementById('captcha-overlay');
        const captchaProblemDisplay = document.getElementById('captcha-problem');
        const captchaAnswerInput = document.getElementById('captcha-answer');
        const captchaSubmitBtn = document.getElementById('captcha-submit-btn');
        const captchaMessageDisplay = document.getElementById('captcha-message');

        // –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç
        const clickSound = document.getElementById('clickSound');

        // –ö–ª—é—á–∏ –¥–ª—è localStorage
        const VALUE_KEY = 'brickCounterValue';
        const TIMESTAMP_KEY = 'lastBrickClickTimestamp';
        const USED_PROMOS_KEY = 'usedPromoCodes';
        const CAPTCHA_SOLVED_KEY = 'captchaSolved'; // –ù–æ–≤—ã–π –∫–ª—é—á –¥–ª—è –∫–∞–ø—á–∏

        // –ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è
        const promoCodes = {
            "promotest": 12.000,
            "promotest1": 5.789,
            "secretbonus": 25.000,
            "freebie": 0.500
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let currentValue;
        let lastClickTimestamp;
        let usedPromoCodes;
        let currentCaptchaAnswer; // –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Ç–µ–∫—É—â–µ–π –∫–∞–ø—á–∏

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ localStorage –∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        function loadState() {
            currentValue = parseFloat(localStorage.getItem(VALUE_KEY)) || 0;
            lastClickTimestamp = parseInt(localStorage.getItem(TIMESTAMP_KEY)) || 0;
            try {
                usedPromoCodes = JSON.parse(localStorage.getItem(USED_PROMOS_KEY)) || [];
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ usedPromoCodes –∏–∑ localStorage:", e);
                usedPromoCodes = [];
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage
        function saveState() {
            localStorage.setItem(VALUE_KEY, currentValue.toString());
            localStorage.setItem(TIMESTAMP_KEY, lastClickTimestamp.toString());
            localStorage.setItem(USED_PROMOS_KEY, JSON.stringify(usedPromoCodes));
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞
        function updateCounterDisplay() {
            counterDisplay.textContent = `–°—á—ë—Ç: ${currentValue.toFixed(3)}`; // toFixed(3) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è –∫–∏—Ä–ø–∏—á–∞)
        function updateMessage(msg, color = '#ffe0b2') {
            messageDisplay.textContent = msg;
            messageDisplay.style.color = color;
            if (msg) {
                setTimeout(() => messageDisplay.textContent = '', 3000);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–æ–º–æ–∫–æ–¥–∞—Ö
        function updatePromoMessage(msg, color = '#ffcc80') {
            promoMessageDisplay.textContent = msg;
            promoMessageDisplay.style.color = color;
            if (msg) {
                setTimeout(() => promoMessageDisplay.textContent = '', 4000);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏
        function formatTimeLeft(milliseconds) {
            const totalSeconds = Math.floor(milliseconds / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return `${hours}—á ${minutes}–º ${seconds}—Å`;
        }

        // --- –õ–æ–≥–∏–∫–∞ –ö–∞–ø—á–∏ ---
        function generateCaptchaProblem() {
            const num1 = Math.floor(Math.random() * 3001) - 1000; // –û—Ç -1000 –¥–æ 2000
            const num2 = Math.floor(Math.random() * 3001) - 1000; // –û—Ç -1000 –¥–æ 2000
            const operator = Math.random() < 0.5 ? '+' : '-';

            let problemString;
            let correctAnswer;

            if (operator === '+') {
                problemString = `${num1} + ${num2} = ?`;
                correctAnswer = num1 + num2;
            } else {
                problemString = `${num1} - ${num2} = ?`;
                correctAnswer = num1 - num2;
            }

            captchaProblemDisplay.textContent = problemString;
            currentCaptchaAnswer = correctAnswer;
            captchaAnswerInput.value = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            captchaMessageDisplay.textContent = ''; // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            captchaAnswerInput.focus(); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        }

        function showCaptcha() {
            if (localStorage.getItem(CAPTCHA_SOLVED_KEY) !== 'true') {
                captchaOverlay.classList.add('active');
                generateCaptchaProblem();
                document.body.style.overflow = 'hidden'; // –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            }
        }

        function hideCaptcha() {
            captchaOverlay.classList.remove('active');
            localStorage.setItem(CAPTCHA_SOLVED_KEY, 'true'); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥, —á—Ç–æ –∫–∞–ø—á–∞ —Ä–µ—à–µ–Ω–∞
            document.body.style.overflow = ''; // –†–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É

}

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–ø—á–∏
        captchaSubmitBtn.addEventListener('click', function() {
            const userAnswer = parseInt(captchaAnswerInput.value);

            if (isNaN(userAnswer)) {
                captchaMessageDisplay.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ.';
                captchaMessageDisplay.style.color = 'red';
                return;
            }

            if (userAnswer === currentCaptchaAnswer) {
                captchaMessageDisplay.textContent = '–í–µ—Ä–Ω–æ! –ö–∞–ø—á–∞ –ø—Ä–æ–π–¥–µ–Ω–∞.';
                captchaMessageDisplay.style.color = 'green';
                setTimeout(hideCaptcha, 1000); // –ó–∞–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            } else {
                captchaMessageDisplay.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
                captchaMessageDisplay.style.color = 'red';
                generateCaptchaProblem(); // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
            }
            playClickSound(); // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∫–∞–ø—á–∏
        });

        // –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∂–∞—Ç—å Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∫–∞–ø—á–∏
        captchaAnswerInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                captchaSubmitBtn.click();
            }
        });

        // --- –õ–æ–≥–∏–∫–∞ –∑–≤—É–∫–∞ ---
        function playClickSound() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –∏ –º–æ–∂–Ω–æ –ª–∏ –µ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
            if (clickSound) {
                // –ï—Å–ª–∏ –∑–≤—É–∫ —É–∂–µ –∏–≥—Ä–∞–µ—Ç, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –µ–≥–æ –Ω–∞ –Ω–∞—á–∞–ª–æ
                clickSound.currentTime = 0;
                clickSound.play().catch(e => {
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ–π –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
                    console.warn("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞:", e);
                    // –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏—é –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                });
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –∫–æ –≤—Å–µ–º –∫–Ω–æ–ø–∫–∞–º –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞
        document.addEventListener('click', function(event) {
            if (event.target.tagName === 'BUTTON') {
                playClickSound();
            }
        });

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ---
        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            updateCounterDisplay();

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–ø—á—É
            if (localStorage.getItem(CAPTCHA_SOLVED_KEY) !== 'true') {
                showCaptcha();
            } else {
                // –ï—Å–ª–∏ –∫–∞–ø—á–∞ —É–∂–µ —Ä–µ—à–µ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                if (lastClickTimestamp) {
                    const now = Date.now();
                    const twentyFourHours = 24 * 60 * 60 * 1000;
                    if (now - lastClickTimestamp < twentyFourHours) {
                        const timeLeft = twentyFourHours - (now - lastClickTimestamp);
                        updateMessage(`–°–ª–µ–¥—É—é—â–∏–π –∫–ª–∏–∫ —á–µ—Ä–µ–∑ ${formatTimeLeft(timeLeft)}`, 'orange');
                    } else {
                        updateMessage('–ö–∏—Ä–ø–∏—á –≥–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º –ø—Ä–∏–±–∞–≤–ª–µ–Ω–∏—è–º!');
                    }
                } else {
                    updateMessage('–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∏—Ä–ø–∏—á, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!');
                }
                updatePromoMessage('–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –±–æ–Ω—É—Å–∞!');
            }
        });


        // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π ---

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–∏—Ä–ø–∏—á—É
        brick.addEventListener('click', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ä–µ—à–µ–Ω–∞ –ª–∏ –∫–∞–ø—á–∞. –ï—Å–ª–∏ –Ω–µ—Ç, –Ω–µ –¥–∞—ë–º –∫–ª–∏–∫–Ω—É—Ç—å –ø–æ –∫–∏—Ä–ø–∏—á—É.
            if (localStorage.getItem(CAPTCHA_SOLVED_KEY) !== 'true') {
                showCaptcha(); // –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ—à–∏—Ç—å –∫–∞–ø—á—É
                updateMessage('–°–Ω–∞—á–∞–ª–∞ —Ä–µ—à–∏—Ç–µ –∫–∞–ø—á—É!', 'red');
                return;
            }

            playClickSound(); // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∏—Ä–ø–∏—á

            const now = Date.now(); // –¢–µ–∫—É—â–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
            const twentyFourHours = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 24 —á–∞—Å–∞
            if (lastClickTimestamp && (now - lastClickTimestamp < twentyFourHours)) {
                const timeLeft = twentyFourHours - (now - lastClickTimestamp);
                updateMessage(`–°–ª–µ–¥—É—é—â–∏–π –∫–ª–∏–∫ –≤–æ–∑–º–æ–∂–µ–Ω —á–µ—Ä–µ–∑ ${formatTimeLeft(timeLeft)}`, 'orange');
                return;
            }

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 0.005 –¥–æ 1
            const min = 0.005;
            const max = 1.000;
            const randomIncrease = Math.random() * (max - min) + min;

            currentValue = parseFloat(currentValue) + randomIncrease;

            updateCounterDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞
            lastClickTimestamp = now; // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É
            saveState(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ

            updateMessage(`+${randomIncrease.toFixed(3)} –¥–æ–±–∞–≤–ª–µ–Ω–æ!`, '#a7ffeb'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" –ø—Ä–æ–º–æ–∫–æ–¥
        applyPromoBtn.addEventListener('click', function() {
            const enteredCode = promoInput.value.trim().toLowerCase(); // –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ –æ–±—Ä–µ–∑–∞–µ–º –ø—Ä–æ–±–µ–ª—ã

            if (!enteredCode) {
                updatePromoMessage("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥.", 'orange');
                return;
            }

            if (promoCodes.hasOwnProperty(enteredCode)) {
                if (usedPromoCodes.includes(enteredCode)) {
                    updatePromoMessage(`–ü—Ä–æ–º–æ–∫–æ–¥ "${enteredCode}" —É–∂–µ –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω.`, 'red');
                } else {
                    const promoValue = promoCodes[enteredCode];
                    currentValue = parseFloat(currentValue) + promoValue;

                    usedPromoCodes.push(enteredCode); // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–º–æ–∫–æ–¥ –≤ —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö

                    updateCounterDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞
                    saveState(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ

                    updatePromoMessage(`–ü—Ä–æ–º–æ–∫–æ–¥ "${enteredCode}" —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω—ë–Ω! +${promoValue.toFixed(3)}`, '#00ff7f');
                    promoInput.value = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                }
            } else {
                updatePromoMessage("–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥.", 'red');
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        resetProgressBtn.addEventListener('click', function() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å, –≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ç—É—Å –∫–∞–ø—á–∏? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.')) {
                localStorage.clear(); // –û—á–∏—â–∞–µ–º –≤–µ—Å—å localStorage –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞
                loadState(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                updateCounterDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                updateMessage('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω! –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∏—Ä–ø–∏—á, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.', 'lightgreen');
                updatePromoMessage('–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –±–æ–Ω—É—Å–∞!');
                showCaptcha(); // –°–±—Ä–æ—Å–∏–ª–∏ localStorage, –∑–Ω–∞—á–∏—Ç, –∫–∞–ø—á–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å–Ω–æ–≤–∞
            }
        });

    </script>

</body>
</html>
